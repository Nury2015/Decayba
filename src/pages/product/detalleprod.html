<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalles del producto</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../assets/css/global.css" />
    <link rel="stylesheet" href="../../assets/css/header.css" />
    <link rel="stylesheet" href="../../assets/css/home.css" />
    <link rel="stylesheet" href="../../assets/css/footer.css" />
    <link rel="stylesheet" href="../../assets/css/detalleprod.css" />
    <link rel="stylesheet" href="../../assets/css/carrito.css" />
   
    
</head>
<body>

 <nav>
    <a href="../../../index.html">
      <img src="../../assets/icon/icon_menu.svg" alt="menu" class="menu" />
    </a>

    <div class="navbar-left">
      <a href="../../../index.html">
        <img src="../../assets/logos/logodecayba.png" alt="logo" class="logo" />
      </a>

      <ul>
       

        <li>
          <a href="../../pages/cosmetic/belleza.html">Belleza</a>
        </li>

        <li>
          <a href="../../pages/home/hogar.html">Hogar</a>
        </li>

        <li>
          <a href="../../pages/pets/mascotas.html">Mascotas</a>
        </li>

        <li>
          <a href="../../pages/Toys/juguetes.html">Juguetes</a>
        </li>

       
      </ul>
    </div>

    <div class="navbar-right">
      <ul>
       

        <li class="navbar-shopping-cart">
          <a id="ver-carrito">
            <img src="../../assets/icon/icon_shopping_cart.svg" alt="shopping cart" />
            <div>0</div>
          </a>
        </li>
      </ul>
    </div>
  </nav>

    <div class="product-detaill" id="product-detaill">
        <aside class="imagen">
                    <div class="carousel">
                <button class="prev">&#10094;</button>
                <div class="carousel-images" id="carousel">
                </div>
                <button class="next">&#10095;</button>
            </div>
        </aside>
    </div>
  <div class="card-container" id="card-container"></div>

   <aside class="product-detail" id="product-detail">
          <a href="./src/pages/home/index.html"><img class="cerrar" src="./src/assets/icon/icon_close.png" alt="Volver" /></a>
      <div class="title-container">
      
        <p class="title">Resumen del pedido</p>

      </div>

      <!-- Carrito -->
      <div class="my-order-content" id="cart-content"></div>

      <!-- Botón WhatsApp -->
      <div class="verificar">
        <a href="#" class="btn-whatsapp" id="btn-whatsapp">WhatsApp</a>
      </div>

      <!-- Botón Ver Carrito -->
      <div class="verificar">
        <a href="./src/pages/cart/carrito.html" class="btn-carrito" id="btn-carrito">Ver Carrito</a>
      </div>

    </aside>

  <script type="module" src="../../assets/js/main.js"></script>
  <script>
    
        const cart = JSON.parse(localStorage.getItem('carrito')) || [];
        const carouselImages = document.querySelector('.carousel-images');
        const prevBtn = document.querySelector('.prev');
        const nextBtn = document.querySelector('.next');
        const item = JSON.parse(localStorage.getItem('productoSeleccionado')) || [];
        const productDetail = document.getElementById('product-detaill');
        const carrousel = document.getElementById('carousel');

        item.imagenes.forEach(src => {
             const div = document.createElement("div");
          div.classList.add("carousel-item");
          const rutaFinal = src.replace("./src", "../..");
          console.log(rutaFinal)
          div.innerHTML = `
                 <img src="${rutaFinal}" alt="carrito de compra">       
            `;
          carrousel.appendChild(div);
        });

        const images = document.querySelectorAll('.carousel-images img');

        const div = document.createElement('aside');
        div.classList.add('product-inf');
        div.innerHTML = `
          <h3>${item.nombre}</h3>
            <p>${item.precio}</p>
            <p>${item.descripcion}
            </p>

            <button class="primary-button add-to-cart-button " onclick="window.location.href='carrito.html'">
                <img src="icons/bt_add_to_cart.svg" alt="add to card">
                Add to cart
            </button>
          `;
        productDetail.appendChild(div);

        // carrusel para celular
        document.addEventListener("DOMContentLoaded", () => {
            const carousel = document.querySelector('.carousel-images');

            // Solo activar si estamos en pantalla pequeña (celular)
            function isMobile() {
                return window.innerWidth <= 640;
            }

            let isAtEnd = false;

            carousel.addEventListener('scroll', () => {
                const maxScrollLeft = carousel.scrollWidth - carousel.clientWidth;

                if (carousel.scrollLeft >= maxScrollLeft - 10 && isMobile() && !isAtEnd) {
                    isAtEnd = true;

                    // Esperar un poco antes de volver al inicio
                    setTimeout(() => {
                        carousel.scrollTo({ left: 0, behavior: 'smooth' });
                        isAtEnd = false;
                    }, 1200); // puedes ajustar el tiempo aquí
                }
            });
        });

        let counter = 0;
        const total = document.querySelectorAll('.carousel-images img').length;
        nextBtn.addEventListener('click', () => {
            counter = (counter + 1) % total;
            updateCarousel();
        });

        prevBtn.addEventListener('click', () => {
            counter = (counter - 1 + total) % total;
            updateCarousel();
        });

        function updateCarousel() {
            const size = images[0].clientWidth;
            carouselImages.style.transform = `translateX(${-size * counter}px)`;
        }

      

           function actualizarCarritoVisual() {
      const cartCountDiv = document.querySelector('.navbar-shopping-cart div');
      const totalItems = cart.reduce((acc, item) => acc + item.cantidad, 0);
      cartCountDiv.textContent = totalItems;
    }
  window.addEventListener('resize', updateCarousel);
     actualizarCarritoVisual()

   
    const hamburger = document.getElementById("hamburger");
  const mobileMenu = document.querySelector(".mobile-menu");

  /*hamburger.addEventListener("click", () => {
    hamburger.classList.toggle("active");     // Aquí la magia
    mobileMenu.classList.toggle("active");
  });*/
 
    </script>


</body>

</html>